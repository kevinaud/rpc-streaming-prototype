<mat-card class="decision-card">
  <mat-card-header>
    <mat-card-title>Pending Decision</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    @if (sessionState.pendingProposal(); as pending) {
      <div class="proposal-content">
        <div class="proposal-label">Proposal:</div>
        <div class="proposal-text">{{ pending.text }}</div>
      </div>

      @if (submissionError(); as error) {
        <div class="submission-error">
          <mat-icon>error</mat-icon>
          <span>{{ error }}</span>
          <button mat-icon-button (click)="dismissError()" aria-label="Dismiss error">
            <mat-icon>close</mat-icon>
          </button>
        </div>
      }

      <div class="decision-actions">
        <button
          mat-raised-button
          color="warn"
          class="reject-button"
          (click)="submitDecision(false)"
          [disabled]="isSubmitting() || !sessionState.isConnected()"
        >
          @if (isSubmitting()) {
            <mat-spinner diameter="20" />
          } @else {
            <span class="button-content">
              <mat-icon>close</mat-icon>
              <span class="button-label">Reject</span>
            </span>
          }
        </button>

        <button
          mat-raised-button
          color="primary"
          class="approve-button"
          (click)="submitDecision(true)"
          [disabled]="isSubmitting() || !sessionState.isConnected()"
        >
          @if (isSubmitting()) {
            <mat-spinner diameter="20" />
          } @else {
            <span class="button-content">
              <mat-icon>check</mat-icon>
              <span class="button-label">Approve</span>
            </span>
          }
        </button>
      </div>
    } @else {
      <div class="empty-state">
        <mat-icon>hourglass_empty</mat-icon>
        <p>Waiting for proposal...</p>
        <p class="hint">A proposal will appear here when the Proposer submits one</p>
      </div>
    }
  </mat-card-content>
</mat-card>
